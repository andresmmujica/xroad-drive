version: '3.7'
services:
  fileservice-api:
    container_name: fileservice-api
    user: ${uid}:${gid}
    build: 
      context: ./api
      dockerfile: Dockerfile-dev
    ports:
      - 8082:8082
    volumes:
      - ./api:/fileservice-api
  mongodb:
    container_name: mongodb
    image: mongo:latest
    ports:
      - 27017:27017
    volumes:
      - mongodb-dev:/data/db
  fileservice-ui:
    container_name: fileservice-ui
    user: ${uid}:${gid}
    build: 
      context: ./fileservice-ui
      dockerfile: Dockerfile-dev
    ports:
      - 8080:8080
    volumes:
      - ./fileservice-ui:/fileservice-ui

volumes:
  mongodb-dev: